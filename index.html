<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pengganda Text — HTML Lengkap</title>
<style>
  :root {
    --bg: #0f1724;
    --card: #0b1220;
    --muted: #333;
    --accent: #2dd4bf;
  }

  * {
    box-sizing: border-box;
  }

  body {
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    margin: 0;
    min-height: 100vh;
    background: #f6f7f8;
    color: #333;
    padding: 10px;
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: center;
  }

  .wrap {
    width: 100%;
    max-width: 960px;
  }

  header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
  }

  h1 {
    font-size: 20px;
    margin: 0;
  }

  p.lead {
    margin: 0;
    color: var(--muted);
    font-size: 13px;
  }

  .card {
    padding: 18px;
    border-radius: 12px;
    border: 1px solid #ccc;
  }

  .grid {
    display: grid;
    width: 100%;
    gap: 16px;

  }

  label {
    display: block;
    font-size: 13px;
    margin-bottom: 6px;
    color: var(--muted);
  }

  textarea,
  input[type="number"],
  input[type="text"],
  select {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    background: transparent;
    color: inherit;
    font-size: 14px;
  }

  textarea {
    min-height: 160px;
    resize: vertical;
  }

  .controls {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  button {
    background: var(--accent);
    border: none;
    padding: 10px 12px;
    border-radius: 8px;
    color: #333;
    cursor: pointer;
    font-weight: 600;
  }

  button.ghost {
    background: transparent;
    border: 1px solid #ccc;
    color: var(--muted);
  }

  .result {
    white-space: pre-wrap;
    overflow: auto;
    max-height: 420px;
    padding: 12px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.01);
    border: 1px solid #ccc;
  }

  .small {
    font-size: 12px;
    color: var(--muted);
  }

  .footer {
    margin-top: 12px;
    font-size: 12px;
    color: var(--muted);
  }

  @media (max-width: 900px) {
    .grid {
      grid-template-columns: 1fr;
    }

    .card {
      padding: 14px;
    }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Pengganda Text</h1>
        <p class="lead">Masukkan teks, pilih berapa kali ingin digandakan, dan dapatkan hasilnya. (Bahasa: Indonesia)</p>
      </div>
    </header>

    <div class="card">
      <div class="grid">
        <div>
          <label for="inputText">Teks sumber</label>
          <textarea id="inputText" placeholder="Tulis atau tempel teks di sini..."></textarea>
        <div>
          <label for="preview">Hasil / Preview</label>
          <div id="result" class="result" aria-live="polite"></div>
          <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
            <div style="flex:1">
              <label for="times">Jumlah penggandaan</label>
              <input id="times" type="number" min="1" value="5" />
            </div>
            <div style="width:140px">
              <label for="separator">Spasi Ganti</label>
              <input id="separator" type="text" placeholder="\n---\n" />
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
            <label style="display:flex;gap:8px;align-items:center"><input id="trim" type="checkbox" /> <span class="small">Hapus spasi awal/akhir tiap baris</span></label>
            <label style="display:flex;gap:8px;align-items:center"><input id="includeOriginal" type="checkbox" checked /> <span class="small">Sertakan teks asli pada urutan pertama</span></label>
          </div>

          <div class="controls">
            <button id="generateBtn">Generate</button>
            <button id="copyBtn" class="ghost" style="background: green; color: #fff;">Copy</button>
            <button id="downloadBtn" class="ghost">Download .txt</button>
            <button id="clearBtn" class="ghost" style="background: #800000; color: #fff;">Clear</button>
            <button id="randomBtn" class="ghost" style="background: #800000; color: #fff;" >Contoh acak</button>
          </div>

          <p class="footer">Tips: gunakan pemisah seperti "spasi atau teks karakter lain" atau "⚝" untuk membuat jeda antar penggandaan. Anda bisa mengganti jumlah penggandaan sesuka hati.</p>
        </div>

          <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
            <label class="small">Preview mode:</label>
            <select id="mode" style="width:100%">
              <option value="text">Teks biasa</option>
              <option value="html">Teks + HTML-encode</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <p style="color:var(--muted);font-size:13px;margin-top:10px">Dibuat otomatis — buka file ini di browser Anda. Jika ingin fitur tambahan (mis. penggandaan garis per baris, nomor urut, atau ekspor CSV), beri tahu saya.</p>
  </div>

  <script>
    const inputText = document.getElementById('inputText')
    const timesInput = document.getElementById('times')
    const separatorInput = document.getElementById('separator')
    const generateBtn = document.getElementById('generateBtn')
    const resultDiv = document.getElementById('result')
    const copyBtn = document.getElementById('copyBtn')
    const downloadBtn = document.getElementById('downloadBtn')
    const clearBtn = document.getElementById('clearBtn')
    const trimChk = document.getElementById('trim')
    const includeOriginalChk = document.getElementById('includeOriginal')
    const randomBtn = document.getElementById('randomBtn')
    const modeSelect = document.getElementById('mode')

    // default separator placeholder
    separatorInput.value = '\n \n'

    function escapeHtml(str){
      return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;').replace(/'/g,'&#039;')
    }

    function buildRepeatedText(){
      const raw = inputText.value || ''
      const times = Math.max(1, Math.floor(Number(timesInput.value) || 1))
      const sep = separatorInput.value || ''
      const trim = trimChk.checked
      const includeOriginal = includeOriginalChk.checked

      // prepare base piece(s)
      let piece = raw
      if(trim){
        // trim each line
        piece = piece.split('\n').map(s => s.trim()).join('\n')
      }

      const parts = []
      for(let i=0;i<times;i++){
        if(i===0 && !includeOriginal){
          // if not include original, still add generated identical content (spec chosen by user)
          // user expects 'times' copies; just add piece identical for each iteration
        }
        parts.push(piece)
      }

      return parts.join(sep)
    }

    function render(){
      const text = buildRepeatedText()
      if(modeSelect.value === 'html'){
        resultDiv.innerHTML = escapeHtml(text)
      } else {
        resultDiv.textContent = text
      }
    }

    generateBtn.addEventListener('click', ()=>{ render(); })

    copyBtn.addEventListener('click', async ()=>{
      const text = buildRepeatedText()
      try{
        await navigator.clipboard.writeText(text)
        copyBtn.textContent = 'Copied!'
        setTimeout(()=> copyBtn.textContent = 'Copy',1200)
      }catch(e){
        // fallback
        const ta = document.createElement('textarea')
        ta.value = text
        document.body.appendChild(ta)
        ta.select()
        try{ document.execCommand('copy'); copyBtn.textContent = 'Copied!'; setTimeout(()=> copyBtn.textContent = 'Copy',1200) }catch(e){ alert('Tidak bisa menyalin otomatis. Salin manual.') }
        ta.remove()
      }
    })

    downloadBtn.addEventListener('click', ()=>{
      const text = buildRepeatedText()
      const blob = new Blob([text], {type:'text/plain;charset=utf-8'})
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = 'pengganda-text.txt'
      document.body.appendChild(a)
      a.click()
      a.remove()
      URL.revokeObjectURL(url)
    })

    clearBtn.addEventListener('click', ()=>{
      inputText.value = ''
      resultDiv.textContent = ''
    })

    randomBtn.addEventListener('click', ()=>{
      inputText.value = 'Halo! Ini contoh teks singkat untuk digandakan.'
      timesInput.value = 10
      separatorInput.value = '\n---\n'
      render()
    })

    // live render when typing (debounced)
    let typingTimer
    inputText.addEventListener('input', ()=>{
      clearTimeout(typingTimer)
      typingTimer = setTimeout(render, 350)
    })
    timesInput.addEventListener('input', render)
    separatorInput.addEventListener('input', render)
    trimChk.addEventListener('change', render)
    includeOriginalChk.addEventListener('change', render)
    modeSelect.addEventListener('change', render)

    // initial render for empty state
    render()
  </script>
</body>
</html>
